<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <script>
        window.addEventListener('message', receiveMessage, false)
        const electron = require('electron')
        const ipcRenderer = electron.ipcRenderer;
        const remote = electron.remote;

        async function receiveMessage(event) {
            console.log(event.data)
            console.log()
            const json = JSON.parse(event.data)
            const result = await getImage(json.fullPath)
            console.log(result)
            const blob = new Blob([result])
            console.log(blob)
            document.getElementById("root").src = URL.createObjectURL(blob)
        }

        const getImage = async (payload) => {
            try {
                if (ipcRenderer) {
                    const result = await ipcRenderer.invoke('evidence:getImageFileContent', payload)
                    return result
                }
            } catch (error) {
                console.log(error)
            }
        }

        //todo
    </script>
</head>
<body>
<img id="root"></img>
</body>
</html>