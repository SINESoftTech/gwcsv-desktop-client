<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='UTF-8'>
  <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css' rel='stylesheet'
    integrity='sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC' crossorigin='anonymous'>
  <script>
    const imgBlob = async () => {
      console.log(window.api.image())
      const imageJson = JSON.parse(window.api.image())
      const result = await window.api.getImage(imageJson.fullPath)
      const blob = new Blob([result])
      const url = URL.createObjectURL(blob)
      document.getElementById('root').src = url
    }
    imgBlob()
  </script>
</head>
<style>
  .c-btn {
    min-width: 64px;
    color: #fff;
    padding: 6px 16px;
    border-radius: 4px;
    background-color: #2890CF;
  }
</style>

<body>
  <div class='container'>
    <div class='row'>
      <div class='col-12'>
        <div class='my-3'>
          <button type='button' class='btn c-btn' id='btnLeft'>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="bi bi-arrow-90deg-left" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4z" />
            </svg>
            <span class='ms-2'>左旋</span>
          </button>
          <button type='button' class='btn c-btn' id='btnRight'>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="bi bi-arrow-90deg-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M14.854 4.854a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 4H3.5A2.5 2.5 0 0 0 1 6.5v8a.5.5 0 0 0 1 0v-8A1.5 1.5 0 0 1 3.5 5h9.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4z" />
            </svg>
            <span>右旋</span>
          </button>
          <button type='button' class='btn c-btn' id='zoomIn'>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-zoom-in"
              viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z" />
              <path
                d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z" />
              <path fill-rule="evenodd"
                d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z" />
            </svg>
            <span>放大</span>
          </button>
          <button type='button' class='btn c-btn' id='zoomOut'>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-zoom-out"
              viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z" />
              <path
                d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z" />
              <path fill-rule="evenodd" d="M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z" />
            </svg>
            <span>縮小</span>
          </button>
        </div>
        <figure class='figure'>
          <img id='root' class='img-fluid img-thumbnail' />
          <figcaption class='figure-caption'></figcaption>
        </figure>
      </div>
    </div>
  </div>
  <script>
    let angle = 0
    document.getElementById('btnLeft').onclick = function () {
      angle = (angle + 90) % 360
      const img = document.getElementById('root')
      img.setAttribute('style', 'transform: rotate(' + angle + 'deg)')
    }
    document.getElementById('btnRight').onclick = function () {
      angle = (angle - 90) % 360
      const img = document.getElementById('root')
      img.setAttribute('style', 'transform: rotate(' + angle + 'deg)')
    }
    document.getElementById('zoomIn').onclick = function () {
      const img = document.getElementById('root')
      img.style.width = img.width * 1.2 + 'px'
    }
    document.getElementById('zoomOut').onclick = function () {
      const img = document.getElementById('root')
      img.style.width = img.width / 1.2 + 'px'
    }
    document.getElementById('root').addEventListener('mouseup', mouseClick)

    function mouseClick(event) {
      if (event.button === 0) {
        const img = document.getElementById('root')
        img.style.width = img.width * 1.2 + 'px'
      }
      if (event.button === 2) {
        const img = document.getElementById('root')
        img.style.width = img.width / 1.2 + 'px'
      }
    }

  </script>
  <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js'
    integrity='sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM'
    crossorigin='anonymous'></script>

</body>

</html>